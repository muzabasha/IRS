{
    "id": "u2-t1",
    "title": "Query Languages (Keyword, Pattern, Structural, Protocols)",
    "unitId": "unit-2",
    "slides": [
        {
            "slideNumber": 1,
            "type": "title",
            "title": "Query Languages in IR",
            "subtitle": "Bridging User Intent and System Logic",
            "content": {
                "text": "A query language is the interface between the user's information need and the search engine's matching capabilities. It defines the syntax and semantics for expressing search requests.",
                "hook": "Knowing what you want is one thing. Knowing how to ask for it is another."
            }
        },
        {
            "slideNumber": 2,
            "type": "standard",
            "title": "Introduction to Query Languages",
            "content": {
                "text": "Query languages in IR differ from SQL. While SQL is for structured data and exact matches, IR query languages handle unstructured data and ranked matches. They must be simple enough for users but powerful enough for complex needs."
            }
        },
        {
            "slideNumber": 3,
            "type": "standard",
            "title": "Keyword Querying",
            "content": {
                "text": "The most common form. Users type a sequence of words. The system implicitly treats them as an OR (Broad) or AND (Narrow) operation.",
                "outcomes": [
                    "Single-word queries",
                    "Context queries (Phrases)",
                    "Boolean combinations (implicit or explicit)"
                ]
            },
            "formula": {
                "equation": "R(q_{AND}) = \\bigcap_{t \\in q} Dist(t), \\quad R(q_{OR}) = \\bigcup_{t \\in q} Dist(t)",
                "description": "Information Retrieval queries are mathematically modeled as set operations over the distribution of terms in the collection.",
                "terms": [
                    {
                        "symbol": "R(q)",
                        "meaning": "Result set - list of documents matching the query 'q'"
                    },
                    {
                        "symbol": "\\bigcap",
                        "meaning": "Intersection (AND logic) - document must contain ALL terms"
                    },
                    {
                        "symbol": "\\bigcup",
                        "meaning": "Union (OR logic) - document can contain ANY of the terms"
                    },
                    {
                        "symbol": "Dist(t)",
                        "meaning": "Distribution set of term 't' (all doc IDs where 't' occurs)"
                    }
                ],
                "calculation": {
                    "exampleTitle": "Boolean Set Matching",
                    "description": "Evaluating a multi-term query against an index.",
                    "steps": [
                        {
                            "label": "Define Index",
                            "formula": "D(\\text{cat}) = \\{1, 2, 4\\}, D(\\text{dog}) = \\{2, 3, 4\\}",
                            "note": "A small 4-doc collection."
                        },
                        {
                            "label": "Intersection (AND)",
                            "formula": "\\{1, 2, 4\\} \\cap \\{2, 3, 4\\} = \\{2, 4\\}",
                            "note": "Only Docs 2 and 4 have both words."
                        },
                        {
                            "label": "Union (OR)",
                            "formula": "\\{1, 2, 4\\} \\cup \\{2, 3, 4\\} = \\{1, 2, 3, 4\\}",
                            "note": "All docs match if search is 'cat OR dog'."
                        },
                        {
                            "label": "Negation (NOT)",
                            "formula": "D(\\text{cat}) - D(\\text{dog}) = \\{1\\}",
                            "note": "Doc 1 has 'cat' but NOT 'dog'."
                        }
                    ],
                    "input": "Q:'cat AND dog'",
                    "output": "Docs: [2, 4]"
                }
            }
        },
        {
            "slideNumber": 4,
            "type": "standard",
            "title": "Pattern Matching",
            "content": {
                "definition": "Retrieving documents containing words that match a specific pattern rather than exact terms.",
                "text": "Common patterns: 1. Wildcards (*, ?), 2. Prefix matching, 3. Suffix matching, 4. Range queries (e.g. [a-z]), 5. Regular Expressions."
            },
            "subTopics": [
                {
                    "title": "Deep Dive: Regular Expressions in IR",
                    "content": "Regular expressions provide the most powerful mechanism for text pattern matching, allowing for complex search logic within a single query string.",
                    "subSubTopics": [
                        {
                            "title": "Regex Efficiency",
                            "content": "Why is regex slow on large indices? Unlike simple terms, regex often requires a full scan of the vocabulary unless specialized indices like Trigram indices are used.",
                            "keyPoints": [
                                "Anchor points (^, $) improve performance.",
                                "Greedy vs Non-greedy matching impacts retrieval speed."
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "slideNumber": 5,
            "type": "standard",
            "title": "Structural Queries",
            "content": {
                "text": "Combining content search with structural constraints. Useful for XML or HTML documents.",
                "examples": [
                    "Find 'Hamlet' in <Title>",
                    "Find words near each other in the same <Paragraph>",
                    "Containment and proximity operators."
                ]
            },
            "subTopics": [
                {
                    "title": "XML Retrieval Concepts",
                    "content": "Retrieving 'focused' elements rather than entire documents. The goal is to return the most specific XML tag that satisfies the query.",
                    "subSubTopics": [
                        {
                            "title": "CAS and CO Queries",
                            "content": "1. Content-and-Structure (CAS): Queries specifying both tags and text. 2. Content-Only (CO): Queries ignoring tags for ranking but respecting them for display.",
                            "examples": [
                                "Find 'Shakespeare' in <author> tags (CAS).",
                                "Find 'climate change' anywhere but prefer <abstract> results (CO)."
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "slideNumber": 6,
            "type": "standard",
            "title": "Query Protocols",
            "content": {
                "text": "The standards used to communicate queries between systems.",
                "outcomes": [
                    "Z39.50: A classic protocol for library and information systems.",
                    "SRU/SRW (Search/Retrieve URL): Modern web-friendly versions of Z39.50.",
                    "OpenSearch: Providing search results in a standard format."
                ]
            }
        },
        {
            "slideNumber": 7,
            "type": "activity",
            "title": "Activity: Protocol Trace",
            "content": {
                "activity": "Inspect the URL",
                "description": "Go to Google and search for something. Look at the URL structure. Can you find the 'q=' parameter? That's part of the simple query protocol."
            }
        },
        {
            "slideNumber": 8,
            "type": "quiz",
            "title": "Topic Quiz",
            "questions": [
                "What is the difference between a prefix match and a regular expression?",
                "Why are structural queries important for XML data?",
                "What protocol is widely used in library management systems?",
                "Explain the 'Keyword' query type."
            ],
            "answers": [
                "Prefix match matches terms starting with a string (e.g., 'comp*'), while regex allows complex pattern matching logic (e.g., '[a-z]+[0-9]*').",
                "Because XML is structured (tags), querying needs to respect hierarchy (e.g., title inside book) which keyword search ignores.",
                "Z39.50 is the classic protocol (and SRU/SRW for web).",
                "The simplest type where users provide words, implicitly treated as OR/AND, typically matched against an inverted index."
            ]
        },
        {
            "slideNumber": 9,
            "type": "summary",
            "title": "Trends and Research Issues",
            "content": {
                "text": "Current research focuses on Natural Language Queries (asking full questions), Conversational Search (Voice assistants), and Cross-Language Querying.",
                "nextTopic": "Query Operations",
                "preparation": "Read about Relevance Feedback."
            }
        }
    ]
}